## üìö **Memory Palace Engine - –ü–æ–ª–Ω–∞—è –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¢–µ–∫—É—â–µ–≥–æ –°–æ—Å—Ç–æ—è–Ω–∏—è**

### **‚è∏Ô∏è –ù–∞ —á—ë–º –æ—Å—Ç–∞–Ω–æ–≤–∏–ª–∏—Å—å: 2025-12-09, 22:44 +08**

***

## **üéØ –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å –¥–≤–∏–∂–∫–∞**

### ‚úÖ **–ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
1. ‚úÖ **Minecraft-style FPS –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä** —Å –≥—Ä–∞–≤–∏—Ç–∞—Ü–∏–µ–π
2. ‚úÖ **Pointer Lock** –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º—ã—à—å—é
3. ‚úÖ **WASD –¥–≤–∏–∂–µ–Ω–∏–µ** –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–∑–≥–ª—è–¥–∞
4. ‚úÖ **–°–ø—Ä–∏–Ω—Ç** (Shift)
5. ‚úÖ **–ì—Ä–∞–≤–∏—Ç–∞—Ü–∏—è** –∏ —Ñ–∏–∑–∏–∫–∞ –ø–æ–ª–∞
6. ‚úÖ **–õ–∏–Ω–µ–π–Ω—ã–π —Ä–µ–∂–∏–º** –∫–æ—Ä–∏–¥–æ—Ä–∞ —Å —á–µ—Ä–µ–¥—É—é—â–∏–º–∏—Å—è –∫–∞—Ä—Ç–æ—á–∫–∞–º–∏
7. ‚úÖ **–í–∏–¥–∏–º–æ—Å—Ç—å –∫–∞—Ä—Ç–æ—á–µ–∫** –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è
8. ‚úÖ **–ù–∞–≤–∏–≥–∞—Ü–∏—è**: Home (—Å—Ç–∞—Ä—Ç), End (–∫–æ–Ω–µ—Ü)

### üî¥ **–ß—Ç–æ –≤—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫–ª—é—á–µ–Ω–æ:**
1. üî¥ **Room-box —Ä–µ–∂–∏–º** (`CONFIG.corridor.roomBox.enabled = false`)
   - –ü—Ä–∏—á–∏–Ω–∞: —É–ø—Ä–æ—Å—Ç–∏—Ç—å –æ—Ç–ª–∞–¥–∫—É –¥–≤–∏–∂–µ–Ω–∏—è
   - –ì–¥–µ: `palace_engine/js/config.js`, —Å—Ç—Ä–æ–∫–∞ ~40
   - –ö–∞–∫ –≤–∫–ª—é—á–∏—Ç—å: `enabled: true`

***

## **üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –¥–≤–∏–∂–∫–∞**

### **üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤:**

```
palace_engine/
‚îú‚îÄ‚îÄ index.html              # –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
‚îú‚îÄ‚îÄ css/
‚îÇ   ‚îú‚îÄ‚îÄ style.css          # –ì–ª–∞–≤–Ω—ã–π CSS (–∏–º–ø–æ—Ä—Ç—ã)
‚îÇ   ‚îú‚îÄ‚îÄ reset.css          # CSS Reset
‚îÇ   ‚îú‚îÄ‚îÄ variables.css      # CSS –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
‚îÇ   ‚îú‚îÄ‚îÄ scene-3d.css       # 3D –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
‚îÇ   ‚îú‚îÄ‚îÄ cards.css          # –°—Ç–∏–ª–∏ –∫–∞—Ä—Ç–æ—á–µ–∫
‚îÇ   ‚îú‚îÄ‚îÄ ui.css             # UI —ç–ª–µ–º–µ–Ω—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ room-box.css       # –°—Ç–∏–ª–∏ room-box (–æ—Ç–∫–ª—é—á–µ–Ω—ã)
‚îú‚îÄ‚îÄ js/
‚îÇ   ‚îú‚îÄ‚îÄ app.js             # üîß –ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª - –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ config.js          # ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ camera.js          # üéÆ FPS –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä (–æ—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞)
‚îÇ   ‚îú‚îÄ‚îÄ builder.js         # üèóÔ∏è –°–æ–∑–¥–∞–Ω–∏–µ 3D –º–∏—Ä–∞
‚îÇ   ‚îú‚îÄ‚îÄ room-geometry.js   # üìê –ì–µ–æ–º–µ—Ç—Ä–∏—è –∫–æ–º–Ω–∞—Ç (–¥–ª—è room-box)
‚îÇ   ‚îî‚îÄ‚îÄ room-builder.js    # üè† –°—Ç—Ä–æ–∏—Ç–µ–ª—å –∫–æ–º–Ω–∞—Ç (–¥–ª—è room-box)
‚îî‚îÄ‚îÄ data/
    ‚îî‚îÄ‚îÄ 263.json           # –î–∞–Ω–Ω—ã–µ —É—Ä–æ–∫–∞ (—Å–ª–æ–≤–∞)
```

***

## **üéÆ –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ (–ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û!)**

### **–°–∏—Å—Ç–µ–º–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç CSS 3D:**

```
      Y+ (–≤–≤–µ—Ä—Ö)
       |
       |
       |__________ X+ (–≤–ø—Ä–∞–≤–æ)
      /
     /
    Z+ (–∫ –∑—Ä–∏—Ç–µ–ª—é, –∏–∑ —ç–∫—Ä–∞–Ω–∞)
```

### **–ù–∞—à–∞ —Å–∏—Å—Ç–µ–º–∞:**

```javascript
// –ö–∞–º–µ—Ä–∞ —Å–º–æ—Ç—Ä–∏—Ç –≤ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ -Z (–≤–≥–ª—É–±—å —ç–∫—Ä–∞–Ω–∞)
// –ö–∞—Ä—Ç–æ—á–∫–∏ —Ä–∞–∑–º–µ—â–µ–Ω—ã –≤ NEGATIVE Z: -800, -1600, -2400...

Camera.z = 700   // –°—Ç–∞—Ä—Ç–æ–≤–∞—è –ø–æ–∑–∏—Ü–∏—è
Card #1 at Z = -800
Card #2 at Z = -1600
Card #3 at Z = -2400
...
Card #25 at Z = -20000
```

### **–†–∞—Å—á—ë—Ç —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è:**

```javascript
distance = cardWorldZ - Camera.z

// –ü—Ä–∏–º–µ—Ä—ã:
// Camera.z = 700, Card at -800:
//   distance = -800 - 700 = -1500 (–∫–∞—Ä—Ç–æ—á–∫–∞ –í–ü–ï–†–ï–î–ò –Ω–∞ 1500px)

// Camera.z = -800, Card at -800:
//   distance = -800 - (-800) = 0 (–ù–ê –∫–∞—Ä—Ç–æ—á–∫–µ)

// Camera.z = -1600, Card at -800:
//   distance = -800 - (-1600) = 800 (–∫–∞—Ä—Ç–æ—á–∫–∞ –ü–û–ó–ê–î–ò –Ω–∞ 800px)
```

### **Transform –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∫–∞–∫:**

```javascript
corridor.style.transform = `
    translateZ(${fov}px)           // –ü–µ—Ä—Å–ø–µ–∫—Ç–∏–≤–∞ (1000px)
    rotateX(${pitch}rad)           // –ù–∞–∫–ª–æ–Ω –≤–≤–µ—Ä—Ö/–≤–Ω–∏–∑
    rotateY(${yaw}rad)             // –ü–æ–≤–æ—Ä–æ—Ç –≤–ª–µ–≤–æ/–≤–ø—Ä–∞–≤–æ
    translate3d(${-x}px, ${-y}px, ${-z}px)  // ‚ùó –ú–∏–Ω—É—Å—ã!
`;
```

**–ü–æ—á–µ–º—É –º–∏–Ω—É—Å—ã?**
- –ö–æ–≥–¥–∞ `Camera.z = -800`, –º–∏—Ä —Å–¥–≤–∏–≥–∞–µ—Ç—Å—è –Ω–∞ `+800px`
- –ö–∞—Ä—Ç–æ—á–∫–∞ –Ω–∞ `Z=-800` –æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –≤ –ø–æ–∑–∏—Ü–∏–∏ `-800 + 800 = 0` (–Ω–∞ –∫–∞–º–µ—Ä–µ)

***

## **üìê –ì—Ä–∞–Ω–∏—Ü—ã –¥–≤–∏–∂–µ–Ω–∏—è**

### **–¢–µ–∫—É—â–∏–µ –≥—Ä–∞–Ω–∏—Ü—ã (–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ):**

```javascript
// –í camera.js, init():
this.minZ = -(CONFIG.cards.spacing * words.length) - 500;
// –ü—Ä–∏–º–µ—Ä –¥–ª—è 25 —Å–ª–æ–≤: -(800 √ó 25) - 500 = -20500px

this.maxZ = startZ + 300;
// –ü—Ä–∏–º–µ—Ä: 700 + 300 = 1000px

// –î–∏–∞–ø–∞–∑–æ–Ω: –æ—Ç 1000px –¥–æ -20500px (21500px —Å–≤–æ–±–æ–¥—ã)
```

### **–ü–æ—á–µ–º—É —ç—Ç–æ –≤–∞–∂–Ω–æ:**

```javascript
// ‚ùå –°–¢–ê–†–´–ô –ë–ê–ì (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω):
if (this.z < 0) {
    this.z = 0;  // –ë–õ–û–ö–ò–†–û–í–ö–ê! –ù–µ–ª—å–∑—è –±—ã–ª–æ –¥–æ–π—Ç–∏ –¥–æ –∫–∞—Ä—Ç–æ—á–µ–∫
}

// ‚úÖ –°–ï–ô–ß–ê–°:
if (this.z < this.minZ) {
    this.z = this.minZ;  // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º—Å—è –ø–æ—Å–ª–µ –ø–æ—Å–ª–µ–¥–Ω–µ–π –∫–∞—Ä—Ç–æ—á–∫–∏
}
```

***

## **üéØ –õ–æ–≥–∏–∫–∞ –≤–∏–¥–∏–º–æ—Å—Ç–∏ –∫–∞—Ä—Ç–æ—á–µ–∫**

### **updateActiveRooms() –≤ camera.js:**

```javascript
const visibilityThreshold = this.roomSpacing * 3;  // 800 √ó 3 = 2400px
const activeThreshold = 400;  // –î–ª—è –ø–æ–¥—Å–≤–µ—Ç–∫–∏

this.roomsCache.forEach(room => {
    // ‚ùó –ö–†–ò–¢–ò–ß–ù–û: dataset.position —Ö—Ä–∞–Ω–∏—Ç –ü–û–õ–û–ñ–ò–¢–ï–õ–¨–ù–û–ï —á–∏—Å–ª–æ (800, 1600...)
    const roomPositionPositive = parseFloat(room.dataset.position || 0);
    
    // ‚ùó –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –≤ –†–ï–ê–õ–¨–ù–£–Æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—É (negative)
    const roomZ = -roomPositionPositive;  // -800, -1600...
    
    // –†–∞—Å—á—ë—Ç —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è –æ—Ç –∫–∞–º–µ—Ä—ã
    const distance = Math.abs(roomZ - this.z);
    
    // –°–∫—Ä—ã–≤–∞–µ–º –¥–∞–ª—ë–∫–∏–µ –∫–∞—Ä—Ç–æ—á–∫–∏
    if (distance > visibilityThreshold) {
        room.style.visibility = 'hidden';
    } else {
        room.style.visibility = 'visible';
        
        // –ü–æ–¥—Å–≤–µ—á–∏–≤–∞–µ–º –±–ª–∏–∑–∫–∏–µ
        if (distance < activeThreshold) {
            room.classList.add('room--active');
        } else {
            room.classList.remove('room--active');
        }
    }
});
```

### **–ó–æ–Ω—ã –≤–∏–¥–∏–º–æ—Å—Ç–∏:**

```
Camera.z = -800 (–Ω–∞ –ø–µ—Ä–≤–æ–π –∫–∞—Ä—Ç–æ—á–∫–µ)

Card #1  (Z=-800):    distance = 0px      ‚Üí –í–ò–î–ù–ê, –ê–ö–¢–ò–í–ù–ê ‚úÖ
Card #2  (Z=-1600):   distance = 800px    ‚Üí –í–ò–î–ù–ê ‚úÖ
Card #3  (Z=-2400):   distance = 1600px   ‚Üí –í–ò–î–ù–ê ‚úÖ
Card #4  (Z=-3200):   distance = 2400px   ‚Üí –í–ò–î–ù–ê ‚úÖ
Card #5  (Z=-4000):   distance = 3200px   ‚Üí –°–ö–†–´–¢–ê ‚ùå (> 2400px)
```

***

## **üéÆ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞–º–µ—Ä–æ–π**

### **–ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞:**

```javascript
// WASD - –¥–≤–∏–∂–µ–Ω–∏–µ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–∑–≥–ª—è–¥–∞
W / ‚Üë        ‚Üí forward (inputZ = +1)
S / ‚Üì        ‚Üí backward (inputZ = -1)
A / ‚Üê        ‚Üí left (inputX = -1)
D / ‚Üí        ‚Üí right (inputX = +1)
Shift        ‚Üí sprint (—Å–∫–æ—Ä–æ—Å—Ç—å √ó 1.5)
Space        ‚Üí jumpToNextRoom() [—Ç–æ–ª—å–∫–æ –¥–ª—è room-box]
Home         ‚Üí jumpToStart()
End          ‚Üí jumpToEnd()
ESC          ‚Üí –≤—ã—Ö–æ–¥ –∏–∑ Pointer Lock
```

### **–ú—ã—à—å (Pointer Lock):**

```javascript
// –í setupMouse():
this.yaw += e.movementX * this.mouseSensitivity;   // –ü–æ–≤–æ—Ä–æ—Ç –≤–ª–µ–≤–æ/–≤–ø—Ä–∞–≤–æ
this.pitch -= e.movementY * this.mouseSensitivity; // –ù–∞–∫–ª–æ–Ω –≤–≤–µ—Ä—Ö/–≤–Ω–∏–∑

// –ú—ã—à—å –í–ü–†–ê–í–û ‚Üí yaw —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è ‚Üí –ø–æ–≤–æ—Ä–æ—Ç –í–ü–†–ê–í–û ‚úÖ
// –ú—ã—à—å –í–õ–ï–í–û ‚Üí yaw —É–º–µ–Ω—å—à–∞–µ—Ç—Å—è ‚Üí –ø–æ–≤–æ—Ä–æ—Ç –í–õ–ï–í–û ‚úÖ
```

### **–§–æ—Ä–º—É–ª–∞ –¥–≤–∏–∂–µ–Ω–∏—è:**

```javascript
// –í updateMovement():
const sin = Math.sin(this.yaw);
const cos = Math.cos(this.yaw);

// –í–µ–∫—Ç–æ—Ä –¥–≤–∏–∂–µ–Ω–∏—è –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–∑–≥–ª—è–¥–∞
const targetVelocityX = (inputZ * sin + inputX * cos) * baseSpeed;
const targetVelocityZ = -(inputZ * cos - inputX * sin) * baseSpeed;  // ‚ùó –ò–Ω–≤–µ—Ä—Å–∏—è Z

// –ü–ª–∞–≤–Ω–æ–µ —É—Å–∫–æ—Ä–µ–Ω–∏–µ/–∑–∞–º–µ–¥–ª–µ–Ω–∏–µ
this.velocity.x += (targetVelocityX - this.velocity.x) * this.acceleration;
this.velocity.z += (targetVelocityZ - this.velocity.z) * this.acceleration;

// –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∫ –ø–æ–∑–∏—Ü–∏–∏
this.x += this.velocity.x;
this.z += this.velocity.z;
```

***

## **ü™Ç –ì—Ä–∞–≤–∏—Ç–∞—Ü–∏—è –∏ –ø–æ–ª**

### **–§–∏–∑–∏–∫–∞ –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–≥–æ –¥–≤–∏–∂–µ–Ω–∏—è:**

```javascript
// –í updateMovement():

// 1. –ü—Ä–∏–º–µ–Ω—è–µ–º –≥—Ä–∞–≤–∏—Ç–∞—Ü–∏—é –∫–∞–∂–¥—ã–π –∫–∞–¥—Ä
this.velocity.y -= this.gravity;  // 0.5 units/frame¬≤

// 2. –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º —Å–∫–æ—Ä–æ—Å—Ç—å –ø–∞–¥–µ–Ω–∏—è
if (this.velocity.y < -this.terminalVelocity) {  // -20
    this.velocity.y = -this.terminalVelocity;
}

// 3. –ü—Ä–∏–º–µ–Ω—è–µ–º –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—É—é —Å–∫–æ—Ä–æ—Å—Ç—å
this.y += this.velocity.y;

// 4. –ö–æ–ª–ª–∏–∑–∏—è —Å –ø–æ–ª–æ–º
if (this.y <= this.groundLevel) {  // 150px
    this.y = this.groundLevel;
    this.velocity.y = 0;
    this.isOnGround = true;
} else {
    this.isOnGround = false;
}
```

### **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≥—Ä–∞–≤–∏—Ç–∞—Ü–∏–∏ (config.js):**

```javascript
camera: {
    gravity: 0.5,              // –°–∏–ª–∞ –≥—Ä–∞–≤–∏—Ç–∞—Ü–∏–∏
    groundLevel: 150,          // –£—Ä–æ–≤–µ–Ω—å –ø–æ–ª–∞ (–≤—ã—Å–æ—Ç–∞ –≥–ª–∞–∑)
    terminalVelocity: 20,      // –ú–∞–∫—Å. —Å–∫–æ—Ä–æ—Å—Ç—å –ø–∞–¥–µ–Ω–∏—è
}
```

***

## **üèóÔ∏è –°–æ–∑–¥–∞–Ω–∏–µ –º–∏—Ä–∞ (builder.js)**

### **–î–≤–∞ —Ä–µ–∂–∏–º–∞:**

#### **1. Linear Mode (–°–ï–ô–ß–ê–° –ê–ö–¢–ò–í–ï–ù):**

```javascript
// –í buildWorld():
if (CONFIG.corridor.roomBox.enabled === false) {
    // –°–æ–∑–¥–∞—ë–º –ø–æ–ª –∏ —Å—Ç–µ–Ω—ã
    corridor.appendChild(createFloor());
    corridor.appendChild(createWallLeft());
    corridor.appendChild(createWallRight());
    
    // –°–æ–∑–¥–∞—ë–º –∫–∞—Ä—Ç–æ—á–∫–∏ –ø–æ –æ–¥–Ω–æ–π
    words.forEach((word, index) => {
        const position = 0 + ((index + 1) * CONFIG.cards.spacing);
        // position = 800, 1600, 2400... (–ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–µ –¥–ª—è dataset)
        
        const room = createRoom({
            position: position,         // dataset.position = 800
            word: word.en,
            translation: word.ru,
            image: word.image,
            difficulty: getColorByDifficulty(word),
            index: index
        });
        
        corridor.appendChild(room);
    });
}
```

#### **2. Room-Box Mode (–û–¢–ö–õ–Æ–ß–Å–ù):**

```javascript
// –í buildWorld():
if (CONFIG.corridor.roomBox.enabled === true) {
    // –ì—Ä—É–ø–ø–∏—Ä—É–µ–º —Å–ª–æ–≤–∞ –ø–æ –∫–æ–º–Ω–∞—Ç–∞–º (–ø–æ 5 —Å–ª–æ–≤)
    const roomGroups = groupWordsByRooms(words);
    
    // –°–æ–∑–¥–∞—ë–º –∫–æ–º–Ω–∞—Ç—ã-–±–æ–∫—Å—ã
    roomGroups.forEach((roomWords, roomIndex) => {
        const roomBox = createRoomBox(roomIndex, roomWords);
        corridor.appendChild(roomBox);
    });
}
```

### **–ü–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞—Ä—Ç–æ—á–∫–∏:**

```javascript
// –í createRoom():
const isLeft = index % 2 === 0;  // –ß–µ—Ä–µ–¥–æ–≤–∞–Ω–∏–µ —Å–ª–µ–≤–∞/—Å–ø—Ä–∞–≤–∞

// CSS –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ (left/top)
const xOffset = isLeft ? -250 : 250;
room.style.left = `calc(50% + ${xOffset}px)`;
room.style.top = '50%';

// Transform –¢–û–õ–¨–ö–û –¥–ª—è Z –∏ –ø–æ–≤–æ—Ä–æ—Ç–∞
const rotation = isLeft ? 25 : -25;
room.style.transform = `translateZ(-${position}px) rotateY(${rotation}deg)`;
//                                   ‚Üë –ú–ò–ù–£–°! –ö–∞—Ä—Ç–æ—á–∫–∞ –≤ negative Z

// Dataset –¥–ª—è –ª–æ–≥–∏–∫–∏
room.dataset.position = position;  // 800 (–ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–µ)
room.dataset.word = word;
room.dataset.index = index;
```

***

## **‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (config.js)**

### **–û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:**

```javascript
const CONFIG = {
    camera: {
        // –î–≤–∏–∂–µ–Ω–∏–µ
        speed: 8,                    // –ë–∞–∑–æ–≤–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å
        sprintMultiplier: 1.5,       // –ú–Ω–æ–∂–∏—Ç–µ–ª—å —Å–ø—Ä–∏–Ω—Ç–∞
        acceleration: 0.5,           // –£—Å–∫–æ—Ä–µ–Ω–∏–µ (0-1)
        deceleration: 0.3,           // –ó–∞–º–µ–¥–ª–µ–Ω–∏–µ (0-1)
        
        // –ú—ã—à—å
        mouseSensitivity: 0.002,     // –ß—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (—Ä–∞–¥/px)
        invertY: false,              // –ò–Ω–≤–µ—Ä—Å–∏—è –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–π –æ—Å–∏
        minPitch: -Math.PI / 2.5,    // –ú–∞–∫—Å. —É–≥–æ–ª –≤–≤–µ—Ä—Ö (-72¬∞)
        maxPitch: Math.PI / 2.5,     // –ú–∞–∫—Å. —É–≥–æ–ª –≤–Ω–∏–∑ (72¬∞)
        
        // –ì—Ä–∞–≤–∏—Ç–∞—Ü–∏—è
        gravity: 0.5,                // –°–∏–ª–∞ –≥—Ä–∞–≤–∏—Ç–∞—Ü–∏–∏
        groundLevel: 150,            // –í—ã—Å–æ—Ç–∞ –ø–æ–ª–∞
        terminalVelocity: 20,        // –ú–∞–∫—Å. —Å–∫–æ—Ä–æ—Å—Ç—å –ø–∞–¥–µ–Ω–∏—è
        
        // 3D
        fov: 1000,                   // Field of view (–ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤–∞)
    },
    
    corridor: {
        roomSpacing: 800,            // –†–∞—Å—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É –∫–∞—Ä—Ç–æ—á–∫–∞–º–∏
        
        // üî¥ ROOM-BOX –†–ï–ñ–ò–ú (–û–¢–ö–õ–Æ–ß–Å–ù)
        roomBox: {
            enabled: false,          // ‚ùó –í–†–ï–ú–ï–ù–ù–û –û–¢–ö–õ–Æ–ß–ï–ù–û
            wordsPerRoom: 5,         // –°–ª–æ–≤ –≤ –∫–æ–º–Ω–∞—Ç–µ
            roomDepth: 2000,         // –ì–ª—É–±–∏–Ω–∞ –∫–æ–º–Ω–∞—Ç—ã
            roomWidth: 1500,         // –®–∏—Ä–∏–Ω–∞ –∫–æ–º–Ω–∞—Ç—ã
            roomHeight: 1200,        // –í—ã—Å–æ—Ç–∞ –∫–æ–º–Ω–∞—Ç—ã
        }
    },
    
    cards: {
        spacing: 800,                // –†–∞—Å—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É –∫–∞—Ä—Ç–æ—á–∫–∞–º–∏
        offsetLeft: -250,            // –°–º–µ—â–µ–Ω–∏–µ –ª–µ–≤–æ–π —Å—Ç–µ–Ω—ã
        offsetRight: 250,            // –°–º–µ—â–µ–Ω–∏–µ –ø—Ä–∞–≤–æ–π —Å—Ç–µ–Ω—ã
    }
};
```

***

## **üêõ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –±–∞–≥–∏**

### **–ë–∞–≥ #1: "–°—Ç–µ–Ω–∞ —á–µ—Ä–µ–∑ 15 —à–∞–≥–æ–≤"**

**–ü—Ä–∏—á–∏–Ω–∞:**
```javascript
// ‚ùå –ë–´–õ–û:
if (this.z < 0) {
    this.z = 0;          // –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –Ω–∞ Z=0
    this.velocity.z = 0;
}
```

**–†–µ—à–µ–Ω–∏–µ:**
```javascript
// ‚úÖ –°–¢–ê–õ–û:
this.minZ = -(CONFIG.cards.spacing * words.length) - 500;
this.maxZ = startZ + 300;

if (this.z < this.minZ) {
    this.z = this.minZ;  // –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –≥—Ä–∞–Ω–∏—Ü–∞
}
```

**–ö–æ–º–º–∏—Ç:** [d26517f](https://github.com/andreacebotarev-svg/englishlessons/commit/d26517f82b77b1cc7e76a9a0d99547d59cf8aa2e)

***

### **–ë–∞–≥ #2: –ò–Ω–≤–µ—Ä—Å–∏—è –ø–æ–≤–æ—Ä–æ—Ç–∞ –º—ã—à–∏**

**–ü—Ä–∏—á–∏–Ω–∞:**
```javascript
// ‚ùå –ë–´–õ–û:
this.yaw -= e.movementX * this.mouseSensitivity;
// –ú—ã—à—å –≤–ø—Ä–∞–≤–æ ‚Üí yaw —É–º–µ–Ω—å—à–∞–µ—Ç—Å—è ‚Üí –ø–æ–≤–æ—Ä–æ—Ç –≤–ª–µ–≤–æ ‚ùå
```

**–†–µ—à–µ–Ω–∏–µ:**
```javascript
// ‚úÖ –°–¢–ê–õ–û:
this.yaw += e.movementX * this.mouseSensitivity;
// –ú—ã—à—å –≤–ø—Ä–∞–≤–æ ‚Üí yaw —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è ‚Üí –ø–æ–≤–æ—Ä–æ—Ç –≤–ø—Ä–∞–≤–æ ‚úÖ
```

**–ö–æ–º–º–∏—Ç:** [dfb5421](https://github.com/andreacebotarev-svg/englishlessons/commit/dfb54210833232825931555ec650dfbc3d1a58db)

***

### **–ë–∞–≥ #3: –ö–∞—Ä—Ç–æ—á–∫–∏ –∏—Å—á–µ–∑–∞—é—Ç –ø—Ä–∏ –¥–≤–∏–∂–µ–Ω–∏–∏ –≤–ø–µ—Ä—ë–¥**

**–ü—Ä–∏—á–∏–Ω–∞:**
```javascript
// ‚ùå –ë–´–õ–û:
const roomZ = parseFloat(room.dataset.position);  // 800
const distance = Math.abs(this.z - roomZ);
// Camera.z = -800, roomZ = 800
// distance = |-800 - 800| = 1600 (–æ—á–µ–Ω—å –¥–∞–ª–µ–∫–æ!) ‚ùå
```

**–†–µ—à–µ–Ω–∏–µ:**
```javascript
// ‚úÖ –°–¢–ê–õ–û:
const roomPositionPositive = parseFloat(room.dataset.position);  // 800
const roomZ = -roomPositionPositive;  // -800 (—Ä–µ–∞–ª—å–Ω–∞—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞!)
const distance = Math.abs(roomZ - this.z);
// Camera.z = -800, roomZ = -800
// distance = 0 (—Ä—è–¥–æ–º!) ‚úÖ
```

**–ö–æ–º–º–∏—Ç:** [dfb5421](https://github.com/andreacebotarev-svg/englishlessons/commit/dfb54210833232825931555ec650dfbc3d1a58db)

***

### **–ë–∞–≥ #4: –ö–æ–Ω—Ñ–ª–∏–∫—Ç inline transform –≤ builder.js**

**–ü—Ä–∏—á–∏–Ω–∞:**
```javascript
// ‚ùå –ë–´–õ–û –≤ createCorridor():
corridor.style.transform = 'translate(-50%, -50%)';
// –≠—Ç–æ –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–ª–æ—Å—å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–º transform –∏–∑ camera.js
```

**–†–µ—à–µ–Ω–∏–µ:**
```javascript
// ‚úÖ –°–¢–ê–õ–û:
corridor.style.position = 'relative';  // –ë–µ–∑ inline transform
// –¢–µ–ø–µ—Ä—å camera.js –ø–æ–ª–Ω–æ—Å—Ç—å—é –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç transform
```

**–ö–æ–º–º–∏—Ç:** [21a29f0](https://github.com/andreacebotarev-svg/englishlessons/commit/21a29f04952603829812b102b20758864b8a545a)

***

## **üìä –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∫–æ–º–º–∏—Ç–æ–≤ (—Ö—Ä–æ–Ω–æ–ª–æ–≥–∏—è)**

```
1. [091d687] - –°—Ç–∞—Ä—Ç–æ–≤–∞—è –ø–æ–∑–∏—Ü–∏—è –∫–∞–º–µ—Ä—ã Z=700 (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ "—Å—Ç–µ–Ω—ã –≤ –Ω–∞—á–∞–ª–µ")
2. [21a29f0] - –£–±—Ä–∞–Ω inline transform –∏–∑ #corridor
3. [d834ad3] - –ò–Ω–≤–µ—Ä—Å–∏—è Z-—Å–∫–æ—Ä–æ—Å—Ç–∏ –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –¥–≤–∏–∂–µ–Ω–∏—è W/S
4. [c1a7604] - –û—Ç–∫–ª—é—á—ë–Ω room-box —Ä–µ–∂–∏–º –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
5. [d26517f] - –£–±—Ä–∞–Ω–æ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ Z<0, –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –≥—Ä–∞–Ω–∏—Ü—ã
6. [dfb5421] - –ò–Ω–≤–µ—Ä—Å–∏—è yaw + –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–∏–¥–∏–º–æ—Å—Ç–∏ –∫–∞—Ä—Ç–æ—á–µ–∫
```

***

## **üîß –ö–∞–∫ –≤–∫–ª—é—á–∏—Ç—å room-box —Ä–µ–∂–∏–º**

### **–®–∞–≥ 1: –í–∫–ª—é—á–∏—Ç—å –≤ config.js**

```javascript
// palace_engine/js/config.js, —Å—Ç—Ä–æ–∫–∞ ~40
roomBox: {
    enabled: true,  // ‚úÖ –ò–∑–º–µ–Ω–∏—Ç—å –Ω–∞ true
    wordsPerRoom: 5,
    roomDepth: 2000,
    // ...
}
```

### **–®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å room-builder.js**

–£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —Ñ—É–Ω–∫—Ü–∏–∏ `groupWordsByRooms()` –∏ `createRoomBox()` —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.

### **–®–∞–≥ 3: –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å**

```javascript
// –í –∫–æ–Ω—Å–æ–ª–∏ –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏:
CONFIG.corridor.roomBox.enabled
// –î–æ–ª–∂–Ω–æ –±—ã—Ç—å true

document.querySelectorAll('.room-box').length
// –î–æ–ª–∂–Ω–æ –±—ã—Ç—å > 0 (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ–º–Ω–∞—Ç)
```

***

## **üéØ TODO: –ß—Ç–æ –º–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å**

### **–í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:**

1. ‚úÖ ~~–ò—Å–ø—Ä–∞–≤–∏—Ç—å –¥–≤–∏–∂–µ–Ω–∏–µ WASD~~ (–ì–û–¢–û–í–û)
2. ‚úÖ ~~–ò—Å–ø—Ä–∞–≤–∏—Ç—å –ø–æ–≤–æ—Ä–æ—Ç –º—ã—à–∏~~ (–ì–û–¢–û–í–û)
3. ‚úÖ ~~–ò—Å–ø—Ä–∞–≤–∏—Ç—å –≤–∏–¥–∏–º–æ—Å—Ç—å –∫–∞—Ä—Ç–æ—á–µ–∫~~ (–ì–û–¢–û–í–û)
4. ‚è≥ **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å room-box —Ä–µ–∂–∏–º**
5. ‚è≥ **–î–æ–±–∞–≤–∏—Ç—å collision detection –¥–ª—è —Å—Ç–µ–Ω**

### **–°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:**

6. ‚è≥ **Head bobbing** (–∫–∞—á–∞–Ω–∏–µ –≥–æ–ª–æ–≤—ã –ø—Ä–∏ —Ö–æ–¥—å–±–µ)
7. ‚è≥ **–ó–≤—É–∫ —à–∞–≥–æ–≤**
8. ‚è≥ **–ü–ª–∞–≤–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥ –º–µ–∂–¥—É –∫–∞—Ä—Ç–æ—á–∫–∞–º–∏** (scroll snap)
9. ‚è≥ **–ú–∏–Ω–∏-–∫–∞—Ä—Ç–∞** (–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–æ–∑–∏—Ü–∏—é –≤ –∫–æ—Ä–∏–¥–æ—Ä–µ)
10. ‚è≥ **–ù–∞—Å—Ç—Ä–æ–π–∫–∏** (—Å–∫–æ—Ä–æ—Å—Ç—å, —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –º—ã—à–∏)

### **–ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:**

11. ‚è≥ **–ü—Ä—ã–∂–æ–∫** (Space)
12. ‚è≥ **–†–µ–ª—å–µ—Ñ –ø–æ–ª–∞** (—Ö–æ–ª–º—ã, —Å—Ç—É–ø–µ–Ω—å–∫–∏)
13. ‚è≥ **Ambient occlusion** (—Ç–µ–Ω–∏)
14. ‚è≥ **–ß–∞—Å—Ç–∏—Ü—ã** (–ø—ã–ª—å –≤ –≤–æ–∑–¥—É—Ö–µ)
15. ‚è≥ **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –æ—Å–≤–µ—â–µ–Ω–∏–µ**

***

## **üîç Debug –∫–æ–º–∞–Ω–¥—ã (–¥–ª—è –∫–æ–Ω—Å–æ–ª–∏)**

```javascript
// === –ü–†–û–í–ï–†–ö–ê –ü–û–ó–ò–¶–ò–ò ===
Camera.x, Camera.y, Camera.z
// –¢–µ–∫—É—â–∞—è –ø–æ–∑–∏—Ü–∏—è –∫–∞–º–µ—Ä—ã

Camera.yaw * 180 / Math.PI
// Yaw –≤ –≥—Ä–∞–¥—É—Å–∞—Ö (0-360¬∞)

Camera.pitch * 180 / Math.PI
// Pitch –≤ –≥—Ä–∞–¥—É—Å–∞—Ö

// === –ü–†–û–í–ï–†–ö–ê –°–ö–û–†–û–°–¢–ò ===
Camera.velocity
// {x, y, z} - —Ç–µ–∫—É—â–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å

Camera.keys
// –°–æ—Å—Ç–æ—è–Ω–∏–µ –∫–ª–∞–≤–∏—à

// === –ü–†–û–í–ï–†–ö–ê –ì–†–ê–ù–ò–¶ ===
Camera.minZ, Camera.maxZ
// –ì—Ä–∞–Ω–∏—Ü—ã –¥–≤–∏–∂–µ–Ω–∏—è

Camera.isOnGround
// true/false - –Ω–∞ –∑–µ–º–ª–µ?

// === –ü–†–û–í–ï–†–ö–ê –ö–ê–†–¢–û–ß–ï–ö ===
document.querySelectorAll('.room').length
// –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–∞—Ä—Ç–æ—á–µ–∫

document.querySelectorAll('.room--active').length
// –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö (–±–ª–∏–∑–∫–∏—Ö)

document.querySelectorAll('[style*="visibility: visible"]').length
// –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–∏–¥–∏–º—ã—Ö

// === –¢–ï–õ–ï–ü–û–†–¢–ê–¶–ò–Ø ===
Camera.jumpToStart()
// –ù–∞ —Å—Ç–∞—Ä—Ç

Camera.jumpToEnd()
// –í –∫–æ–Ω–µ—Ü

Camera.animateTo(-1600, 1000)
// –ö –∫–∞—Ä—Ç–æ—á–∫–µ #2

// === –ò–ó–ú–ï–ù–ï–ù–ò–ï –ù–ê–°–¢–†–û–ï–ö ===
Camera.speed = 20
// –£–≤–µ–ª–∏—á–∏—Ç—å —Å–∫–æ—Ä–æ—Å—Ç—å

Camera.mouseSensitivity = 0.004
// –£–≤–µ–ª–∏—á–∏—Ç—å —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –º—ã—à–∏

Camera.gravity = 0
// –û—Ç–∫–ª—é—á–∏—Ç—å –≥—Ä–∞–≤–∏—Ç–∞—Ü–∏—é (–ª–µ–≤–∏—Ç–∞—Ü–∏—è!)

// === –ü–†–û–í–ï–†–ö–ê –ö–û–ù–§–ò–ì–ê ===
CONFIG.corridor.roomBox.enabled
// –í–∫–ª—é—á—ë–Ω –ª–∏ room-box?

CONFIG.camera.groundLevel
// –£—Ä–æ–≤–µ–Ω—å –ø–æ–ª–∞

CONFIG.cards.spacing
// –†–∞—Å—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É –∫–∞—Ä—Ç–æ—á–∫–∞–º–∏
```

***

## **üìñ –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –ø–æ —Ñ–∞–π–ª–∞–º**

### **app.js** - –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è

```javascript
// 1. –ß–∏—Ç–∞–µ—Ç ID —É—Ä–æ–∫–∞ –∏–∑ URL (?lesson=263)
// 2. –ó–∞–≥—Ä—É–∂–∞–µ—Ç JSON —Å –¥–∞–Ω–Ω—ã–º–∏
// 3. –ò–∑–≤–ª–µ–∫–∞–µ—Ç –º–∞—Å—Å–∏–≤ —Å–ª–æ–≤
// 4. –í—ã–∑—ã–≤–∞–µ—Ç buildWorld(words) ‚Üí —Å–æ–∑–¥–∞—ë—Ç #corridor
// 5. –î–æ–±–∞–≤–ª—è–µ—Ç #corridor –≤ #world
// 6. –í—ã–∑—ã–≤–∞–µ—Ç initCamera(words, CONFIG)
```

### **config.js** - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

```javascript
// –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –æ–±—ä–µ–∫—Ç CONFIG —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏:
// - camera: –¥–≤–∏–∂–µ–Ω–∏–µ, –º—ã—à—å, –≥—Ä–∞–≤–∏—Ç–∞—Ü–∏—è, 3D
// - corridor: —Ä–∞–∑–º–µ—Ä—ã, spacing, roomBox
// - cards: –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
// - ui, colors, audio
```

### **camera.js** - FPS –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä

```javascript
// –û–±—ä–µ–∫—Ç Camera —Å –º–µ—Ç–æ–¥–∞–º–∏:
// - init() - –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
// - setupKeyboard() - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∞–≤–∏—à
// - setupMouse() - Pointer Lock + –¥–≤–∏–∂–µ–Ω–∏–µ –º—ã—à–∏
// - updateMovement() - —Ñ–∏–∑–∏–∫–∞ –¥–≤–∏–∂–µ–Ω–∏—è
// - applyTransform() - –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ transform –∫ #corridor
// - updateActiveRooms() - –≤–∏–¥–∏–º–æ—Å—Ç—å –∫–∞—Ä—Ç–æ—á–µ–∫
// - updateProgress() - –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä
// - updateWordCounter() - —Å—á—ë—Ç—á–∏–∫ —Å–ª–æ–≤

// –§—É–Ω–∫—Ü–∏—è initCamera(words, config) - –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∫–∞–º–µ—Ä—É
```

### **builder.js** - –°–æ–∑–¥–∞–Ω–∏–µ 3D –º–∏—Ä–∞

```javascript
// –§—É–Ω–∫—Ü–∏–∏:
// - buildWorld(words) - –≥–ª–∞–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è
// - createCorridor() - –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä #corridor
// - createFloor/Wall() - –ø–æ–ª –∏ —Å—Ç–µ–Ω—ã
// - createRoom() - –æ–¥–Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–∞
// - getColorByDifficulty() - —Ü–≤–µ—Ç –ø–æ –¥–ª–∏–Ω–µ —Å–ª–æ–≤–∞

// –î–≤–∞ —Ä–µ–∂–∏–º–∞:
// - Linear: –ø–æ–ª + —Å—Ç–µ–Ω—ã + —á–µ—Ä–µ–¥—É—é—â–∏–µ—Å—è –∫–∞—Ä—Ç–æ—á–∫–∏
// - Room-box: –≥—Ä—É–ø–ø—ã –∫–∞—Ä—Ç–æ—á–µ–∫ –≤ "–∫–æ–º–Ω–∞—Ç–∞—Ö"
```

### **room-geometry.js** - –ì–µ–æ–º–µ—Ç—Ä–∏—è –∫–æ–º–Ω–∞—Ç

```javascript
// –î–ª—è room-box —Ä–µ–∂–∏–º–∞:
// - getRoomZPosition() - –ø–æ–∑–∏—Ü–∏—è –∫–æ–º–Ω–∞—Ç—ã –ø–æ –∏–Ω–¥–µ–∫—Å—É
// - getWordRoomIndex() - –Ω–æ–º–µ—Ä –∫–æ–º–Ω–∞—Ç—ã –¥–ª—è —Å–ª–æ–≤–∞
// - logRoomInfo() - –≤—ã–≤–æ–¥ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∫–æ–º–Ω–∞—Ç–∞—Ö
```

### **room-builder.js** - –°—Ç—Ä–æ–∏—Ç–µ–ª—å –∫–æ–º–Ω–∞—Ç

```javascript
// –î–ª—è room-box —Ä–µ–∂–∏–º–∞:
// - groupWordsByRooms() - –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ —Å–ª–æ–≤ –ø–æ –∫–æ–º–Ω–∞—Ç–∞–º
// - createRoomBox() - —Å–æ–∑–¥–∞–Ω–∏–µ –æ–¥–Ω–æ–π –∫–æ–º–Ω–∞—Ç—ã-–±–æ–∫—Å–∞
// - createRoomCard() - —Å–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Ä—Ç–æ—á–∫–∏ –≤–Ω—É—Ç—Ä–∏ –∫–æ–º–Ω–∞—Ç—ã
```

***

## **üé® CSS —Å—Ç—Ä—É–∫—Ç—É—Ä–∞**

### **scene-3d.css** - 3D –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã

```css
#scene {
    perspective: var(--fov);  /* 1000px */
    perspective-origin: 50% 50%;
}

#corridor {
    position: relative;
    transform-style: preserve-3d;
    /* Transform –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ JS */
}
```

### **cards.css** - –ö–∞—Ä—Ç–æ—á–∫–∏

```css
.room {
    position: absolute;
    width: 300px;
    height: 400px;
    transform-style: preserve-3d;
    /* left, top, transform –∑–∞–¥–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ JS */
}

.room--active {
    /* –ü–æ–¥—Å–≤–µ—Ç–∫–∞ –±–ª–∏–∑–∫–∏—Ö –∫–∞—Ä—Ç–æ—á–µ–∫ */
    box-shadow: 0 0 30px rgba(255, 214, 10, 0.6);
}
```

### **room-box.css** - Room-box (–æ—Ç–∫–ª—é—á–µ–Ω—ã)

```css
.room-box {
    /* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –∫–æ–º–Ω–∞—Ç—ã */
    transform-style: preserve-3d;
}

.room-card {
    /* –ö–∞—Ä—Ç–æ—á–∫–∞ –≤–Ω—É—Ç—Ä–∏ –∫–æ–º–Ω–∞—Ç—ã */
    pointer-events: auto;
}
```

***

## **üìã –ß–µ–∫–ª–∏—Å—Ç –ø–µ—Ä–µ–¥ –≤–∫–ª—é—á–µ–Ω–∏–µ–º room-box**

- [ ] –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ linear —Ä–µ–∂–∏–º —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–¥–µ–∞–ª—å–Ω–æ
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤–∏–¥–∏–º–æ—Å—Ç—å –≤—Å–µ—Ö 25 –∫–∞—Ä—Ç–æ—á–µ–∫
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≥—Ä–∞–Ω–∏—Ü—ã –¥–≤–∏–∂–µ–Ω–∏—è
- [ ] –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –Ω–µ—Ç –æ—à–∏–±–æ–∫ –≤ –∫–æ–Ω—Å–æ–ª–∏
- [ ] –ò–∑–º–µ–Ω–∏—Ç—å `roomBox.enabled` –Ω–∞ `true` –≤ config.js
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —Å–æ–∑–¥–∞—é—Ç—Å—è `.room-box` —ç–ª–µ–º–µ–Ω—Ç—ã
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–≤–∏–≥–∞—Ü–∏—é –º–µ–∂–¥—É –∫–æ–º–Ω–∞—Ç–∞–º–∏
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å Space (jumpToNextRoom)
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–∏–¥–∏–º–æ—Å—Ç—å –∫–∞—Ä—Ç–æ—á–µ–∫ –≤ –∫–æ–º–Ω–∞—Ç–∞—Ö
- [ ] –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —Å—á—ë—Ç—á–∏–∫ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç "–ö–æ–º–Ω–∞—Ç–∞ X/Y"

***

## **‚úÖ –¢–µ–∫—É—â–∞—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å: –í–´–°–û–ö–ê–Ø**

–í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –±–∞–≥–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã, –¥–≤–∏–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –≤ Minecraft, –∫–∞—Ä—Ç–æ—á–∫–∏ –ø–æ—è–≤–ª—è—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ. –î–≤–∏–∂–æ–∫ –≥–æ—Ç–æ–≤ –∫ –¥–∞–ª—å–Ω–µ–π—à–µ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ! üöÄ  
