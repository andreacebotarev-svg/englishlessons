/* ============================================================
   LESSON RESPONSIVE STYLES
   Mobile, tablet and desktop breakpoints
   ============================================================ */

/* Tablet */
@media (max-width: 1024px) {
  body {
    padding: var(--space-md);
  }

  .app-shell {
    grid-template-columns: 1fr;
    padding: var(--space-lg);
  }

  .sidebar {
    order: -1;
    max-height: 260px;
  }
}

/* Mobile */
@media (max-width: 768px) {
  body {
    padding: var(--space-sm);
  }

  .lesson-header {
    flex-direction: column;
    align-items: stretch;
    padding-top: max(16px, env(safe-area-inset-top));
  }

  .lesson-actions {
    align-items: stretch;
    min-width: 0;
  }

  .lesson-progress {
    margin-top: 4px;
  }

  .vocab-layout {
    grid-template-columns: 1fr;
  }

  .tabs {
    width: 100%;
    justify-content: space-between;
  }

  /* iOS safe area support */
  .app-shell {
    padding-bottom: max(var(--space-lg), env(safe-area-inset-bottom));
  }

  /* Touch target minimums (Apple HIG 44x44) */
  .primary-btn,
  .icon-btn,
  .tab,
  .quiz-option,
  .vocab-item button {
    min-height: 44px;
    min-width: 44px;
    padding: 12px 16px;
  }

  .word-popup-close {
    padding: 12px !important;
    min-width: 44px;
    min-height: 44px;
  }

  /* Scroll performance optimizations */
  .vocab-list,
  .quiz-section,
  .reading-content {
    contain: layout style paint;
    will-change: transform;
  }

  .app-main {
    -webkit-overflow-scrolling: touch;
    overscroll-behavior-y: contain;
  }

  /* Prevent keyboard push issues */
  .quiz-section {
    margin-bottom: 200px;
  }
}

/* Small mobile */
@media (max-width: 480px) {
  .app-shell {
    padding: var(--space-md);
    border-radius: 18px;
  }

  .card {
    padding: var(--space-md);
  }

  .lesson-title {
    font-size: 1.15rem;
  }

  .primary-btn {
    width: 100%;
    justify-content: center;
  }

  .sidebar {
    padding: var(--space-md);
  }

  .notification {
    left: 10px;
    right: 10px;
    transform: translateY(140%);
  }

  .notification.visible {
    transform: translateY(0);
  }

  /* Popup mobile adaptations */
  .word-popup {
    max-width: calc(100vw - 40px) !important;
    min-width: 280px;
  }

  .word-popup-actions {
    flex-direction: column;
  }

  .word-popup-btn {
    width: 100%;
  }
}

/* Landscape mode fixes */
@media (max-width: 768px) and (orientation: landscape) {
  .lesson-header {
    padding: 12px 16px;
  }

  .word-popup {
    max-height: 70vh;
    overflow-y: auto;
  }

  /* Compact spacing for landscape */
  .card {
    padding: var(--space-sm) var(--space-md);
  }
}