# –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞: –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ —É—Ä–æ–∫–∏ –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ —è–∑—ã–∫–∞

## –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ
1. [–û–±–∑–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞](#–æ–±–∑–æ—Ä-–ø—Ä–æ–µ–∫—Ç–∞)
2. [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ-—Ä–µ—à–µ–Ω–∏—è)
3. [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ HTML-—Ñ–∞–π–ª–∞ —É—Ä–æ–∫–∞](#—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-html-—Ñ–∞–π–ª–∞-—É—Ä–æ–∫–∞)
4. [–°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º](#—Å–∏—Å—Ç–µ–º–∞-—É–ø—Ä–∞–≤–ª–µ–Ω–∏—è-—Å–æ—Å—Ç–æ—è–Ω–∏–µ–º)
5. [–ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤](#–º–æ–¥—É–ª—å–Ω–∞—è-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤)
6. [–ü–∞—Ç—Ç–µ—Ä–Ω—ã –∏ best practices](#–ø–∞—Ç—Ç–µ—Ä–Ω—ã-–∏-best-practices)
7. [–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è](#–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å-–∏-–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è)
8. [–ë—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è](#–±—É–¥—É—â–∏–µ-—É–ª—É—á—à–µ–Ω–∏—è)

---

## –û–±–∑–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞

### –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ
–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ —è–∑—ã–∫–∞, —Ä–∞–±–æ—Ç–∞—é—â–∞—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ standalone HTML-—Ñ–∞–π–ª–æ–≤. –ö–∞–∂–¥—ã–π —É—Ä–æ–∫ ‚Äî —ç—Ç–æ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∞–≤—Ç–æ–Ω–æ–º–Ω–æ–µ SPA (Single Page Application), –Ω–µ —Ç—Ä–µ–±—É—é—â–µ–µ –≤–Ω–µ—à–Ω–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –∏–ª–∏ —Å–µ—Ä–≤–µ—Ä–Ω–æ–π —á–∞—Å—Ç–∏.

### –ö–ª—é—á–µ–≤—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã
- **Self-contained**: –ö–∞–∂–¥—ã–π HTML-—Ñ–∞–π–ª —Å–æ–¥–µ—Ä–∂–∏—Ç –≤–µ—Å—å –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–π –∫–æ–¥ (HTML, CSS, JS)
- **Zero dependencies**: –ë–µ–∑ –≤–Ω–µ—à–Ω–∏—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫, —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–æ–≤ –∏–ª–∏ CDN
- **Progressive enhancement**: –ë–∞–∑–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ JavaScript
- **Mobile-first**: –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω —Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
- **Offline-capable**: –ü–æ–ª–Ω–∞—è —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –±–µ–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞

---

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è

### 1. Standalone SPA –≤ –æ–¥–Ω–æ–º —Ñ–∞–π–ª–µ

**–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ:**
- –ü—Ä–æ—Å—Ç–æ—Ç–∞ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è (–æ–¥–∏–Ω —Ñ–∞–π–ª = –æ–¥–∏–Ω —É—Ä–æ–∫)
- –ù–µ—Ç –ø—Ä–æ–±–ª–µ–º —Å CORS –∏–ª–∏ –∑–∞–≥—Ä—É–∑–∫–æ–π —Ä–µ—Å—É—Ä—Å–æ–≤
- –†–∞–±–æ—Ç–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ –±–µ–∑ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞
- –õ–µ–≥–∫–æ –∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞—Ç—å –∏ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞—Ç—å

**–ö–æ–º–ø—Ä–æ–º–∏—Å—Å—ã:**
- –ë–æ–ª—å—à–∏–π —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ (30-70 KB)
- –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ –º–µ–∂–¥—É —É—Ä–æ–∫–∞–º–∏
- –°–ª–æ–∂–Ω–µ–µ –æ–±–Ω–æ–≤–ª—è—Ç—å –≥–ª–æ–±–∞–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏/–ª–æ–≥–∏–∫—É

**–†–µ—à–µ–Ω–∏–µ –¥–ª—è –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è:**
–°–æ–∑–¥–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ —à–∞–±–ª–æ–Ω—ã (–±—É–¥—É—â–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞)

### 2. Vanilla JavaScript –≤–º–µ—Å—Ç–æ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–æ–≤

**–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ:**
- –ù—É–ª–µ–≤–æ–π overhead –Ω–∞ –ø–∞—Ä—Å–∏–Ω–≥ –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞
- –ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é
- –ú–µ–Ω—å—à–∏–π —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞
- –û–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è —Ü–µ–Ω–Ω–æ—Å—Ç—å –¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç–æ–≤

**–ü–∞—Ç—Ç–µ—Ä–Ω—ã –∏–∑ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–æ–≤:**
- –†–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —á–µ—Ä–µ–∑ Proxy API
- –í–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π DOM —á–µ—Ä–µ–∑ DocumentFragment
- –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —á–µ—Ä–µ–∑ –∫–ª–∞—Å—Å—ã
- –û–¥–Ω–æ—Å—Ç–æ—Ä–æ–Ω–Ω–∏–π –ø–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ HTML-—Ñ–∞–π–ª–∞ —É—Ä–æ–∫–∞

### –ë–∞–∑–æ–≤—ã–π —Å–∫–µ–ª–µ—Ç

```html
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–£—Ä–æ–∫ #XXX: [–ù–∞–∑–≤–∞–Ω–∏–µ —Ç–µ–º—ã]</title>
    
    <style>
        /* 1. CSS Reset & Variables */
        /* 2. Layout & Grid System */
        /* 3. Component Styles */
        /* 4. Utility Classes */
        /* 5. Responsive Breakpoints */
        /* 6. Dark Mode Support */
    </style>
</head>
<body>
    <!-- –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ -->
    <header>
        <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è, –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ —É—Ä–æ–∫–∞ -->
    </header>
    
    <main>
        <!-- –°–µ–∫—Ü–∏–∏ —É—Ä–æ–∫–∞ -->
    </main>
    
    <footer>
        <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è, –ø—Ä–æ–≥—Ä–µ—Å—Å -->
    </footer>

    <script>
        /* JavaScript –º–æ–¥—É–ª–∏ */
    </script>
</body>
</html>
```

### –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–ª—è senior-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

#### 1. CSS Architecture

```css
/* === 1. DESIGN TOKENS === */
:root {
    /* Color System - –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–µ —Ü–≤–µ—Ç–∞ */
    --color-primary: #4A90E2;
    --color-success: #4CAF50;
    --color-error: #F44336;
    --color-warning: #FF9800;
    
    /* Typography Scale - –ú–æ–¥—É–ª—å–Ω–∞—è —à–∫–∞–ª–∞ (1.25 ratio) */
    --font-size-xs: 0.75rem;
    --font-size-sm: 0.875rem;
    --font-size-base: 1rem;
    --font-size-lg: 1.25rem;
    --font-size-xl: 1.5rem;
    
    /* Spacing System - 8px base */
    --space-1: 0.5rem;   /* 8px */
    --space-2: 1rem;     /* 16px */
    --space-3: 1.5rem;   /* 24px */
    --space-4: 2rem;     /* 32px */
    
    /* Layout Constraints */
    --max-width-content: 800px;
    --max-width-narrow: 600px;
    --gutter: var(--space-3);
    
    /* Z-index Scale */
    --z-dropdown: 100;
    --z-modal: 200;
    --z-tooltip: 300;
}

/* === 2. MODERN CSS RESET === */
*, *::before, *::after {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

/* –£–ª—É—á—à–µ–Ω–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ —Ç–µ–∫—Å—Ç–∞ */
body {
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
}

/* –£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∏–ª–µ–π —Å–ø–∏—Å–∫–æ–≤ */
ul[role="list"], ol[role="list"] {
    list-style: none;
}

/* === 3. LAYOUT PRIMITIVES === */
/* Stack - –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–µ —Ä–∞–∑–º–µ—â–µ–Ω–∏–µ —Å gap */
.stack {
    display: flex;
    flex-direction: column;
}
.stack > * + * {
    margin-top: var(--stack-gap, var(--space-2));
}

/* Cluster - –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ —Ä–∞–∑–º–µ—â–µ–Ω–∏–µ —Å –ø–µ—Ä–µ–Ω–æ—Å–æ–º */
.cluster {
    display: flex;
    flex-wrap: wrap;
    gap: var(--cluster-gap, var(--space-2));
    justify-content: var(--cluster-justify, flex-start);
    align-items: var(--cluster-align, center);
}

/* Center - —Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ —Å max-width */
.center {
    max-width: var(--center-max-width, var(--max-width-content));
    margin-inline: auto;
    padding-inline: var(--gutter);
}

/* === 4. COMPONENT PATTERNS === */

/* Card Component */
.card {
    background: var(--card-bg, white);
    border-radius: var(--radius-md, 8px);
    padding: var(--space-3);
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    transition: box-shadow 0.2s ease;
}

.card:hover {
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
}

/* Button Component */
.btn {
    /* Base styles */
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: var(--space-1);
    
    /* Typography */
    font-family: inherit;
    font-size: var(--font-size-base);
    font-weight: 600;
    text-decoration: none;
    
    /* Spacing */
    padding: var(--space-2) var(--space-3);
    
    /* Visual */
    border: 2px solid transparent;
    border-radius: var(--radius-md);
    background: var(--btn-bg, var(--color-primary));
    color: var(--btn-color, white);
    
    /* Interaction */
    cursor: pointer;
    transition: all 0.2s ease;
    user-select: none;
}

.btn:hover:not(:disabled) {
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(0,0,0,0.2);
}

.btn:active:not(:disabled) {
    transform: translateY(0);
}

.btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

/* Button Variants */
.btn--secondary {
    --btn-bg: transparent;
    --btn-color: var(--color-primary);
    border-color: currentColor;
}

.btn--success {
    --btn-bg: var(--color-success);
}

.btn--error {
    --btn-bg: var(--color-error);
}

/* === 5. INTERACTIVE STATES === */

/* Focus management –¥–ª—è accessibility */
:focus-visible {
    outline: 3px solid var(--color-primary);
    outline-offset: 2px;
}

/* –£–±–∏—Ä–∞–µ–º outline –¥–ª—è –º—ã—à–∏, —Å–æ—Ö—Ä–∞–Ω—è–µ–º –¥–ª—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã */
:focus:not(:focus-visible) {
    outline: none;
}

/* === 6. RESPONSIVE TYPOGRAPHY === */
/* Fluid typography using clamp() */
h1 {
    font-size: clamp(1.5rem, 4vw, 2.5rem);
}

h2 {
    font-size: clamp(1.25rem, 3vw, 2rem);
}

/* === 7. UTILITY CLASSES === */
.visually-hidden {
    position: absolute;
    width: 1px;
    height: 1px;
    margin: -1px;
    padding: 0;
    overflow: hidden;
    clip: rect(0,0,0,0);
    white-space: nowrap;
    border: 0;
}

.text-center { text-align: center; }
.text-right { text-align: right; }

/* === 8. MEDIA QUERIES === */
/* Mobile-first approach */
@media (min-width: 768px) {
    :root {
        --gutter: var(--space-4);
    }
}

/* === 9. DARK MODE === */
@media (prefers-color-scheme: dark) {
    :root {
        --color-bg: #1a1a1a;
        --color-text: #e0e0e0;
        --card-bg: #2a2a2a;
    }
    
    body {
        background: var(--color-bg);
        color: var(--color-text);
    }
}

/* === 10. PRINT STYLES === */
@media print {
    .no-print { display: none; }
    .card { box-shadow: none; border: 1px solid #ccc; }
}
```

#### 2. JavaScript Architecture

```javascript
// === ARCHITECTURAL PATTERN: MVC —Å —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å—é ===

/**
 * 1. STATE MANAGEMENT LAYER
 * –†–µ–∞–∫—Ç–∏–≤–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º —á–µ—Ä–µ–∑ Proxy
 */

class ReactiveState {
    constructor(initialState) {
        this.listeners = new Map();
        this.state = this._makeReactive(initialState);
    }
    
    _makeReactive(obj) {
        const self = this;
        return new Proxy(obj, {
            set(target, property, value) {
                const oldValue = target[property];
                target[property] = value;
                
                // –£–≤–µ–¥–æ–º–ª—è–µ–º –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤ –æ–± –∏–∑–º–µ–Ω–µ–Ω–∏–∏
                if (self.listeners.has(property)) {
                    self.listeners.get(property).forEach(callback => {
                        callback(value, oldValue);
                    });
                }
                
                return true;
            }
        });
    }
    
    // –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è
    subscribe(property, callback) {
        if (!this.listeners.has(property)) {
            this.listeners.set(property, new Set());
        }
        this.listeners.get(property).add(callback);
        
        // –í–æ–∑–≤—Ä–∞—â–∞–µ–º —Ñ—É–Ω–∫—Ü–∏—é –æ—Ç–ø–∏—Å–∫–∏
        return () => {
            this.listeners.get(property).delete(callback);
        };
    }
    
    // –ü–∞–∫–µ—Ç–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ (debounced)
    batchUpdate(updates) {
        Object.keys(updates).forEach(key => {
            this.state[key] = updates[key];
        });
    }
}

// –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
const lessonState = new ReactiveState({
    currentExercise: 0,
    score: 0,
    answers: [],
    isCompleted: false
});

// –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è
lessonState.subscribe('score', (newScore, oldScore) => {
    console.log(`Score updated: ${oldScore} ‚Üí ${newScore}`);
    updateUI();
});

/**
 * 2. COMPONENT SYSTEM
 * –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
 */

class Component {
    constructor(props = {}) {
        this.props = props;
        this.state = {};
        this.element = null;
        this.mounted = false;
    }
    
    // Lifecycle –º–µ—Ç–æ–¥—ã
    render() {
        throw new Error('render() must be implemented');
    }
    
    mount(container) {
        this.element = this.render();
        container.appendChild(this.element);
        this.mounted = true;
        this.onMount();
        return this;
    }
    
    unmount() {
        if (this.mounted && this.element) {
            this.onUnmount();
            this.element.remove();
            this.mounted = false;
        }
    }
    
    update(newProps) {
        this.props = { ...this.props, ...newProps };
        if (this.mounted) {
            const newElement = this.render();
            this.element.replaceWith(newElement);
            this.element = newElement;
        }
    }
    
    // –•—É–∫–∏ –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª–∞
    onMount() {}
    onUnmount() {}
}

/**
 * –ü—Ä–∏–º–µ—Ä: Exercise Component
 */
class ExerciseComponent extends Component {
    render() {
        const { question, options, onAnswer } = this.props;
        
        const div = document.createElement('div');
        div.className = 'exercise card';
        
        div.innerHTML = `
            <h3 class="exercise__question">${this._escapeHtml(question)}</h3>
            <div class="exercise__options cluster" role="group">
                ${options.map((opt, idx) => `
                    <button 
                        class="btn btn--secondary exercise__option" 
                        data-index="${idx}"
                        type="button"
                    >
                        ${this._escapeHtml(opt)}
                    </button>
                `).join('')}
            </div>
        `;
        
        // Event delegation
        div.addEventListener('click', (e) => {
            const btn = e.target.closest('.exercise__option');
            if (btn) {
                const index = parseInt(btn.dataset.index);
                onAnswer(index);
            }
        });
        
        return div;
    }
    
    _escapeHtml(text) {
        const div = document.createElement('div');
        div.textContent = text;
        return div.innerHTML;
    }
}

/**
 * 3. APPLICATION CONTROLLER
 * –ö–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –∏ –ª–æ–≥–∏–∫–∏
 */

class LessonController {
    constructor(config) {
        this.config = config;
        this.state = new ReactiveState({
            currentStep: 0,
            userAnswers: [],
            score: 0
        });
        
        this.components = new Map();
        this.init();
    }
    
    init() {
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
        this.setupComponents();
        
        // –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è
        this.state.subscribe('currentStep', (newStep) => {
            this.renderCurrentStep(newStep);
        });
        
        this.state.subscribe('score', (newScore) => {
            this.updateScoreDisplay(newScore);
        });
        
        // –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –∏–∑ localStorage
        this.loadProgress();
        
        // –ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
        this.setupAutosave();
    }
    
    setupComponents() {
        const exerciseContainer = document.querySelector('#exercise-container');
        
        // –°–æ–∑–¥–∞–µ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è
        const exercise = new ExerciseComponent({
            question: this.config.exercises[0].question,
            options: this.config.exercises[0].options,
            onAnswer: (index) => this.handleAnswer(index)
        });
        
        this.components.set('exercise', exercise);
        exercise.mount(exerciseContainer);
    }
    
    handleAnswer(answerIndex) {
        const currentExercise = this.config.exercises[this.state.state.currentStep];
        const isCorrect = answerIndex === currentExercise.correctIndex;
        
        // –û–±–Ω–æ–≤–ª—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ
        this.state.state.userAnswers.push({
            exerciseIndex: this.state.state.currentStep,
            answerIndex,
            isCorrect,
            timestamp: Date.now()
        });
        
        if (isCorrect) {
            this.state.state.score += 1;
        }
        
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º feedback
        this.showFeedback(isCorrect);
        
        // –ü–µ—Ä–µ—Ö–æ–¥ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—é
        setTimeout(() => {
            this.nextExercise();
        }, 1500);
    }
    
    nextExercise() {
        if (this.state.state.currentStep < this.config.exercises.length - 1) {
            this.state.state.currentStep += 1;
        } else {
            this.completeLesson();
        }
    }
    
    showFeedback(isCorrect) {
        const feedback = document.createElement('div');
        feedback.className = `feedback ${isCorrect ? 'feedback--success' : 'feedback--error'}`;
        feedback.textContent = isCorrect ? '‚úì –ü—Ä–∞–≤–∏–ª—å–Ω–æ!' : '‚úó –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ';
        
        document.body.appendChild(feedback);
        
        // –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è
        requestAnimationFrame(() => {
            feedback.classList.add('feedback--visible');
        });
        
        // –£–¥–∞–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ 1.5 —Å–µ–∫—É–Ω–¥—ã
        setTimeout(() => {
            feedback.classList.remove('feedback--visible');
            setTimeout(() => feedback.remove(), 300);
        }, 1500);
    }
    
    completeLesson() {
        const percentage = (this.state.state.score / this.config.exercises.length) * 100;
        
        // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
        this.saveResult({
            lessonId: this.config.id,
            score: this.state.state.score,
            total: this.config.exercises.length,
            percentage,
            timestamp: Date.now(),
            answers: this.state.state.userAnswers
        });
        
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —ç–∫—Ä–∞–Ω –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è
        this.showCompletionScreen(percentage);
    }
    
    // Persistence Layer
    saveProgress() {
        const data = {
            currentStep: this.state.state.currentStep,
            userAnswers: this.state.state.userAnswers,
            score: this.state.state.score,
            timestamp: Date.now()
        };
        
        localStorage.setItem(`lesson_${this.config.id}_progress`, JSON.stringify(data));
    }
    
    loadProgress() {
        const saved = localStorage.getItem(`lesson_${this.config.id}_progress`);
        if (saved) {
            const data = JSON.parse(saved);
            // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –ø—Ä–æ—à–ª–æ –º–µ–Ω–µ–µ 24 —á–∞—Å–æ–≤
            if (Date.now() - data.timestamp < 24 * 60 * 60 * 1000) {
                this.state.batchUpdate(data);
            }
        }
    }
    
    setupAutosave() {
        // Debounced –∞–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
        let saveTimeout;
        this.state.subscribe('userAnswers', () => {
            clearTimeout(saveTimeout);
            saveTimeout = setTimeout(() => {
                this.saveProgress();
            }, 1000);
        });
    }
    
    saveResult(result) {
        const results = JSON.parse(localStorage.getItem('lesson_results') || '[]');
        results.push(result);
        // –•—Ä–∞–Ω–∏–º —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 100 —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
        if (results.length > 100) {
            results.shift();
        }
        localStorage.setItem('lesson_results', JSON.stringify(results));
    }
}

/**
 * 4. UTILITY FUNCTIONS
 * –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
 */

const Utils = {
    // Debounce –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —Å–æ–±—ã—Ç–∏–π
    debounce(func, wait) {
        let timeout;
        return function executedFunction(...args) {
            const later = () => {
                clearTimeout(timeout);
                func(...args);
            };
            clearTimeout(timeout);
            timeout = setTimeout(later, wait);
        };
    },
    
    // Throttle –¥–ª—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —á–∞—Å—Ç–æ—Ç—ã –≤—ã–∑–æ–≤–æ–≤
    throttle(func, limit) {
        let inThrottle;
        return function(...args) {
            if (!inThrottle) {
                func.apply(this, args);
                inThrottle = true;
                setTimeout(() => inThrottle = false, limit);
            }
        };
    },
    
    // Shuffle –º–∞—Å—Å–∏–≤–∞ (Fisher-Yates)
    shuffle(array) {
        const arr = [...array];
        for (let i = arr.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [arr[i], arr[j]] = [arr[j], arr[i]];
        }
        return arr;
    },
    
    // Sanitization
    escapeHtml(text) {
        const map = {
            '&': '&amp;',
            '<': '&lt;',
            '>': '&gt;',
            '"': '&quot;',
            "'": '&#039;'
        };
        return text.replace(/[&<>"']/g, m => map[m]);
    },
    
    // Pluralization –¥–ª—è —Ä—É—Å—Å–∫–æ–≥–æ —è–∑—ã–∫–∞
    pluralize(number, one, few, many) {
        const mod10 = number % 10;
        const mod100 = number % 100;
        
        if (mod10 === 1 && mod100 !== 11) return one;
        if (mod10 >= 2 && mod10 <= 4 && (mod100 < 10 || mod100 >= 20)) return few;
        return many;
    },
    
    // –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏
    formatTime(ms) {
        const seconds = Math.floor(ms / 1000);
        const minutes = Math.floor(seconds / 60);
        const hours = Math.floor(minutes / 60);
        
        if (hours > 0) {
            return `${hours}:${String(minutes % 60).padStart(2, '0')}:${String(seconds % 60).padStart(2, '0')}`;
        }
        return `${minutes}:${String(seconds % 60).padStart(2, '0')}`;
    }
};

/**
 * 5. PERFORMANCE OPTIMIZATION
 * –¢–µ—Ö–Ω–∏–∫–∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
 */

const Performance = {
    // Lazy loading –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
    lazyLoadImages() {
        if ('IntersectionObserver' in window) {
            const imageObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const img = entry.target;
                        img.src = img.dataset.src;
                        img.classList.remove('lazy');
                        imageObserver.unobserve(img);
                    }
                });
            });
            
            document.querySelectorAll('img.lazy').forEach(img => {
                imageObserver.observe(img);
            });
        }
    },
    
    // –í–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è –¥–ª–∏–Ω–Ω—ã—Ö —Å–ø–∏—Å–∫–æ–≤
    virtualizeList(items, container, renderItem) {
        const ITEM_HEIGHT = 50;
        const VISIBLE_ITEMS = Math.ceil(container.clientHeight / ITEM_HEIGHT) + 2;
        
        let scrollTop = 0;
        
        const render = () => {
            const startIndex = Math.floor(scrollTop / ITEM_HEIGHT);
            const endIndex = startIndex + VISIBLE_ITEMS;
            
            const visibleItems = items.slice(startIndex, endIndex);
            
            const fragment = document.createDocumentFragment();
            visibleItems.forEach((item, index) => {
                const el = renderItem(item);
                el.style.position = 'absolute';
                el.style.top = `${(startIndex + index) * ITEM_HEIGHT}px`;
                fragment.appendChild(el);
            });
            
            container.innerHTML = '';
            container.appendChild(fragment);
            container.style.height = `${items.length * ITEM_HEIGHT}px`;
        };
        
        container.addEventListener('scroll', Utils.throttle(() => {
            scrollTop = container.scrollTop;
            render();
        }, 100));
        
        render();
    },
    
    // RequestIdleCallback fallback
    scheduleWork(callback) {
        if ('requestIdleCallback' in window) {
            requestIdleCallback(callback);
        } else {
            setTimeout(callback, 1);
        }
    }
};

/**
 * 6. INITIALIZATION
 * –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
 */

document.addEventListener('DOMContentLoaded', () => {
    // –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —É—Ä–æ–∫–∞
    const lessonConfig = {
        id: 'lesson-xxx',
        title: '–ù–∞–∑–≤–∞–Ω–∏–µ —É—Ä–æ–∫–∞',
        exercises: [
            // ... –¥–∞–Ω–Ω—ã–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π
        ]
    };
    
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞
    const lesson = new LessonController(lessonConfig);
    
    // Lazy loading –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
    Performance.lazyLoadImages();
    
    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
    window.addEventListener('error', (event) => {
        console.error('Application error:', event.error);
        // –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ –∞–Ω–∞–ª–∏—Ç–∏–∫—É (–µ—Å–ª–∏ –µ—Å—Ç—å)
    });
    
    // Service Worker —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è (–¥–ª—è PWA)
    if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('/sw.js')
            .then(reg => console.log('SW registered', reg))
            .catch(err => console.log('SW registration failed', err));
    }
});
```

---

## –°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º

### State Machine –¥–ª—è —É—Ä–æ–∫–∞

```javascript
/**
 * –ö–æ–Ω–µ—á–Ω—ã–π –∞–≤—Ç–æ–º–∞—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–π —É—Ä–æ–∫–∞
 * –û–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã –º–µ–∂–¥—É —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏
 */

const LESSON_STATES = {
    INITIAL: 'initial',
    LOADING: 'loading',
    READY: 'ready',
    IN_PROGRESS: 'in_progress',
    PAUSED: 'paused',
    REVIEWING: 'reviewing',
    COMPLETED: 'completed',
    ERROR: 'error'
};

const LESSON_EVENTS = {
    LOAD: 'load',
    START: 'start',
    ANSWER: 'answer',
    PAUSE: 'pause',
    RESUME: 'resume',
    REVIEW: 'review',
    COMPLETE: 'complete',
    ERROR: 'error',
    RESET: 'reset'
};

class LessonStateMachine {
    constructor() {
        this.state = LESSON_STATES.INITIAL;
        this.transitions = this._defineTransitions();
        this.listeners = new Map();
    }
    
    _defineTransitions() {
        return {
            [LESSON_STATES.INITIAL]: {
                [LESSON_EVENTS.LOAD]: LESSON_STATES.LOADING
            },
            [LESSON_STATES.LOADING]: {
                [LESSON_EVENTS.START]: LESSON_STATES.READY,
                [LESSON_EVENTS.ERROR]: LESSON_STATES.ERROR
            },
            [LESSON_STATES.READY]: {
                [LESSON_EVENTS.START]: LESSON_STATES.IN_PROGRESS
            },
            [LESSON_STATES.IN_PROGRESS]: {
                [LESSON_EVENTS.ANSWER]: LESSON_STATES.IN_PROGRESS,
                [LESSON_EVENTS.PAUSE]: LESSON_STATES.PAUSED,
                [LESSON_EVENTS.COMPLETE]: LESSON_STATES.COMPLETED
            },
            [LESSON_STATES.PAUSED]: {
                [LESSON_EVENTS.RESUME]: LESSON_STATES.IN_PROGRESS,
                [LESSON_EVENTS.RESET]: LESSON_STATES.READY
            },
            [LESSON_STATES.COMPLETED]: {
                [LESSON_EVENTS.REVIEW]: LESSON_STATES.REVIEWING,
                [LESSON_EVENTS.RESET]: LESSON_STATES.READY
            },
            [LESSON_STATES.REVIEWING]: {
                [LESSON_EVENTS.RESET]: LESSON_STATES.READY
            },
            [LESSON_STATES.ERROR]: {
                [LESSON_EVENTS.RESET]: LESSON_STATES.INITIAL
            }
        };
    }
    
    transition(event, payload) {
        const currentTransitions = this.transitions[this.state];
        const nextState = currentTransitions?.[event];
        
        if (!nextState) {
            console.warn(`Invalid transition: ${this.state} -> ${event}`);
            return false;
        }
        
        const prevState = this.state;
        this.state = nextState;
        
        // –£–≤–µ–¥–æ–º–ª—è–µ–º –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤
        this._notify(prevState, nextState, payload);
        
        return true;
    }
    
    on(callback) {
        const id = Symbol();
        this.listeners.set(id, callback);
        return () => this.listeners.delete(id);
    }
    
    _notify(from, to, payload) {
        this.listeners.forEach(callback => {
            callback({ from, to, payload });
        });
    }
}
```

---

## –ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞

```javascript
/**
 * –ë–∞–∑–æ–≤—ã–µ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
 */

// 1. Progressbar Component
class ProgressBar extends Component {
    render() {
        const { current, total, label } = this.props;
        const percentage = (current / total) * 100;
        
        const div = document.createElement('div');
        div.className = 'progress';
        div.setAttribute('role', 'progressbar');
        div.setAttribute('aria-valuenow', current);
        div.setAttribute('aria-valuemin', '0');
        div.setAttribute('aria-valuemax', total);
        div.setAttribute('aria-label', label || 'Progress');
        
        div.innerHTML = `
            <div class="progress__bar" style="width: ${percentage}%"></div>
            <span class="progress__label">${current} / ${total}</span>
        `;
        
        return div;
    }
}

// 2. Modal Component
class Modal extends Component {
    render() {
        const { title, content, onClose } = this.props;
        
        const div = document.createElement('div');
        div.className = 'modal';
        div.setAttribute('role', 'dialog');
        div.setAttribute('aria-modal', 'true');
        div.setAttribute('aria-labelledby', 'modal-title');
        
        div.innerHTML = `
            <div class="modal__overlay"></div>
            <div class="modal__container">
                <header class="modal__header">
                    <h2 id="modal-title">${this._escapeHtml(title)}</h2>
                    <button class="modal__close" aria-label="Close modal">&times;</button>
                </header>
                <div class="modal__content">
                    ${content}
                </div>
            </div>
        `;
        
        // Event listeners
        div.querySelector('.modal__close').addEventListener('click', onClose);
        div.querySelector('.modal__overlay').addEventListener('click', onClose);
        
        // Trap focus –≤–Ω—É—Ç—Ä–∏ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
        this._trapFocus(div);
        
        return div;
    }
    
    _trapFocus(container) {
        const focusableElements = container.querySelectorAll(
            'button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'
        );
        const firstElement = focusableElements[0];
        const lastElement = focusableElements[focusableElements.length - 1];
        
        container.addEventListener('keydown', (e) => {
            if (e.key === 'Tab') {
                if (e.shiftKey && document.activeElement === firstElement) {
                    e.preventDefault();
                    lastElement.focus();
                } else if (!e.shiftKey && document.activeElement === lastElement) {
                    e.preventDefault();
                    firstElement.focus();
                }
            }
            
            if (e.key === 'Escape') {
                this.props.onClose();
            }
        });
        
        // –§–æ–∫—É—Å –Ω–∞ –ø–µ—Ä–≤–æ–º —ç–ª–µ–º–µ–Ω—Ç–µ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏
        setTimeout(() => firstElement.focus(), 0);
    }
}

// 3. Timer Component
class Timer extends Component {
    constructor(props) {
        super(props);
        this.startTime = Date.now();
        this.elapsed = 0;
        this.interval = null;
    }
    
    onMount() {
        this.interval = setInterval(() => {
            this.elapsed = Date.now() - this.startTime;
            this.update({ elapsed: this.elapsed });
        }, 1000);
    }
    
    onUnmount() {
        clearInterval(this.interval);
    }
    
    render() {
        const { elapsed = 0 } = this.props;
        const formatted = Utils.formatTime(elapsed);
        
        const span = document.createElement('span');
        span.className = 'timer';
        span.textContent = formatted;
        span.setAttribute('aria-live', 'polite');
        
        return span;
    }
}

// 4. Score Display Component
class ScoreDisplay extends Component {
    render() {
        const { score, total } = this.props;
        const percentage = (score / total) * 100;
        
        const div = document.createElement('div');
        div.className = 'score';
        
        let emoji = 'üòê';
        let message = '–ù–æ—Ä–º–∞–ª—å–Ω–æ';
        
        if (percentage >= 90) {
            emoji = 'üåü';
            message = '–û—Ç–ª–∏—á–Ω–æ!';
        } else if (percentage >= 70) {
            emoji = 'üòä';
            message = '–•–æ—Ä–æ—à–æ!';
        } else if (percentage >= 50) {
            emoji = 'üôÇ';
            message = '–ù–µ–ø–ª–æ—Ö–æ';
        }
        
        div.innerHTML = `
            <div class="score__emoji">${emoji}</div>
            <div class="score__text">
                <strong>${score}</strong> –∏–∑ <strong>${total}</strong>
            </div>
            <div class="score__message">${message}</div>
            <div class="score__percentage">${percentage.toFixed(0)}%</div>
        `;
        
        return div;
    }
}
```

---

## –ü–∞—Ç—Ç–µ—Ä–Ω—ã –∏ Best Practices

### 1. Error Handling

```javascript
/**
 * –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
 */

class ErrorHandler {
    static handle(error, context = {}) {
        console.error('Application error:', error, context);
        
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –¥—Ä—É–∂–µ–ª—é–±–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
        this.showErrorMessage(this.getUserMessage(error));
        
        // –õ–æ–≥–∏—Ä—É–µ–º –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞
        this.logError(error, context);
        
        // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –≤ –∞–Ω–∞–ª–∏—Ç–∏–∫—É (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ)
        this.reportError(error, context);
    }
    
    static getUserMessage(error) {
        if (error instanceof NetworkError) {
            return '–ü—Ä–æ–±–ª–µ–º—ã —Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç.';
        }
        
        if (error instanceof ValidationError) {
            return '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–≤–µ–¥–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ.';
        }
        
        return '–ß—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É.';
    }
    
    static showErrorMessage(message) {
        const toast = document.createElement('div');
        toast.className = 'toast toast--error';
        toast.textContent = message;
        
        document.body.appendChild(toast);
        
        setTimeout(() => {
            toast.classList.add('toast--visible');
        }, 10);
        
        setTimeout(() => {
            toast.classList.remove('toast--visible');
            setTimeout(() => toast.remove(), 300);
        }, 5000);
    }
    
    static logError(error, context) {
        // –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
        const log = {
            timestamp: new Date().toISOString(),
            error: {
                name: error.name,
                message: error.message,
                stack: error.stack
            },
            context,
            userAgent: navigator.userAgent,
            url: window.location.href
        };
        
        console.table(log);
    }
    
    static reportError(error, context) {
        // TODO: –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–µ—Ä–≤–∏—Å–æ–º –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –æ—à–∏–±–æ–∫
        // –ù–∞–ø—Ä–∏–º–µ—Ä: Sentry, Rollbar, –∏–ª–∏ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π endpoint
    }
}

// –ì–ª–æ–±–∞–ª—å–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫
window.addEventListener('error', (event) => {
    ErrorHandler.handle(event.error, {
        type: 'uncaught',
        filename: event.filename,
        lineno: event.lineno,
        colno: event.colno
    });
});

window.addEventListener('unhandledrejection', (event) => {
    ErrorHandler.handle(event.reason, {
        type: 'unhandled-promise'
    });
});
```

### 2. Testing Utilities

```javascript
/**
 * –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ —É—Ç–∏–ª–∏—Ç—ã –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
 * –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –≤ development —Ä–µ–∂–∏–º–µ
 */

const TestUtils = {
    // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π (–¥–ª—è –æ—Ç–ª–∞–¥–∫–∏)
    autoCompleteExercises() {
        const exercises = lessonState.state.exercises;
        exercises.forEach((exercise, index) => {
            setTimeout(() => {
                const correctAnswer = exercise.options[exercise.correctIndex];
                console.log(`Auto-answering ${index + 1}: ${correctAnswer}`);
                // –¢—Ä–∏–≥–≥–µ—Ä–∏–º –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç
                document.querySelector(`[data-exercise="${index}"] [data-index="${exercise.correctIndex}"]`).click();
            }, index * 1000);
        });
    },
    
    // –ü—Ä–æ–≤–µ—Ä–∫–∞ accessibility
    checkA11y() {
        const issues = [];
        
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ alt —Ç–µ–∫—Å—Ç–æ–≤
        document.querySelectorAll('img:not([alt])').forEach(img => {
            issues.push({ element: img, issue: 'Missing alt attribute' });
        });
        
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ aria-labels –¥–ª—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤
        document.querySelectorAll('button:not([aria-label]):not(:has(text))').forEach(btn => {
            issues.push({ element: btn, issue: 'Button without label' });
        });
        
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ç—Ä–∞—Å—Ç–Ω–æ—Å—Ç–∏
        // ... –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω–∞—è –ª–æ–≥–∏–∫–∞
        
        console.table(issues);
        return issues;
    },
    
    // –≠–º—É–ª—è—Ü–∏—è –º–µ–¥–ª–µ–Ω–Ω–æ–≥–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
    simulateSlowNetwork(delay = 3000) {
        const originalFetch = window.fetch;
        window.fetch = async (...args) => {
            await new Promise(resolve => setTimeout(resolve, delay));
            return originalFetch(...args);
        };
    },
    
    // Snapshot —Å–æ—Å—Ç–æ—è–Ω–∏—è
    snapshotState() {
        return JSON.parse(JSON.stringify(lessonState.state));
    },
    
    // –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è
    restoreState(snapshot) {
        Object.assign(lessonState.state, snapshot);
    }
};

// –î–æ—Å—Ç—É–ø —á–µ—Ä–µ–∑ –∫–æ–Ω—Å–æ–ª—å –≤ development
if (process.env.NODE_ENV === 'development') {
    window.__TEST__ = TestUtils;
}
```

---

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

### –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

```javascript
/**
 * Performance monitoring
 */

class PerformanceMonitor {
    constructor() {
        this.marks = new Map();
        this.measures = [];
    }
    
    // –û—Ç–º–µ—Ç–∏—Ç—å –Ω–∞—á–∞–ª–æ –æ–ø–µ—Ä–∞—Ü–∏–∏
    mark(name) {
        performance.mark(name);
        this.marks.set(name, performance.now());
    }
    
    // –ò–∑–º–µ—Ä–∏—Ç—å –≤—Ä–µ–º—è –º–µ–∂–¥—É –æ—Ç–º–µ—Ç–∫–∞–º–∏
    measure(name, startMark, endMark) {
        performance.measure(name, startMark, endMark);
        
        const entry = performance.getEntriesByName(name)[0];
        this.measures.push({
            name,
            duration: entry.duration,
            timestamp: Date.now()
        });
        
        return entry.duration;
    }
    
    // –ü–æ–ª—É—á–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    getPageMetrics() {
        const perfData = performance.getEntriesByType('navigation')[0];
        
        return {
            // Time to First Byte
            ttfb: perfData.responseStart - perfData.requestStart,
            
            // DOM Content Loaded
            dcl: perfData.domContentLoadedEventEnd - perfData.domContentLoadedEventStart,
            
            // Load Complete
            loadComplete: perfData.loadEventEnd - perfData.loadEventStart,
            
            // Total Page Load
            totalLoad: perfData.loadEventEnd - perfData.fetchStart
        };
    }
    
    // –û—Ç—á–µ—Ç –æ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
    report() {
        console.group('Performance Report');
        console.table(this.getPageMetrics());
        console.table(this.measures);
        console.groupEnd();
    }
}

const perfMonitor = new PerformanceMonitor();

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
document.addEventListener('DOMContentLoaded', () => {
    perfMonitor.mark('app-init-start');
    
    // ... –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
    
    perfMonitor.mark('app-init-end');
    perfMonitor.measure('app-initialization', 'app-init-start', 'app-init-end');
    
    // –û—Ç—á–µ—Ç —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥ –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏
    setTimeout(() => {
        perfMonitor.report();
    }, 5000);
});
```

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞

```javascript
/**
 * Batch DOM updates –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è layout thrashing
 */

class DOMBatcher {
    constructor() {
        this.reads = [];
        this.writes = [];
        this.scheduled = false;
    }
    
    read(callback) {
        this.reads.push(callback);
        this.schedule();
    }
    
    write(callback) {
        this.writes.push(callback);
        this.schedule();
    }
    
    schedule() {
        if (this.scheduled) return;
        
        this.scheduled = true;
        requestAnimationFrame(() => {
            // –°–Ω–∞—á–∞–ª–∞ –≤—Å–µ —á—Ç–µ–Ω–∏—è
            this.reads.forEach(fn => fn());
            this.reads = [];
            
            // –ü–æ—Ç–æ–º –≤—Å–µ –∑–∞–ø–∏—Å–∏
            this.writes.forEach(fn => fn());
            this.writes = [];
            
            this.scheduled = false;
        });
    }
}

const batcher = new DOMBatcher();

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
function updateMultipleElements() {
    const elements = document.querySelectorAll('.element');
    
    elements.forEach(el => {
        // –°–Ω–∞—á–∞–ª–∞ —á–∏—Ç–∞–µ–º
        batcher.read(() => {
            const height = el.offsetHeight;
            
            // –ü–æ—Ç–æ–º –ø–∏—à–µ–º
            batcher.write(() => {
                el.style.height = `${height * 2}px`;
            });
        });
    });
}
```

---

## –ë—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

### Roadmap

#### Phase 1: Template System (Q1 2026)
- –°–æ–∑–¥–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã —à–∞–±–ª–æ–Ω–æ–≤ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ HTML-—Ñ–∞–π–ª–æ–≤
- CLI –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤—ã—Ö —É—Ä–æ–∫–æ–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –æ–±—â–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

#### Phase 2: Progressive Web App (Q2 2026)
- Service Worker –¥–ª—è offline —Ä–∞–±–æ—Ç—ã
- –ú–∞–Ω–∏—Ñ–µ—Å—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- Push —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–≤—ã—Ö —É—Ä–æ–∫–∞—Ö

#### Phase 3: Analytics & Insights (Q3 2026)
- –í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –±–µ–∑ –≤–Ω–µ—à–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- –î–∞—à–±–æ—Ä–¥ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –æ–±—É—á–µ–Ω–∏—è
- –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

#### Phase 4: Advanced Interactions (Q4 2026)
- –ì–æ–ª–æ—Å–æ–≤–æ–π –≤–≤–æ–¥ –¥–ª—è —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π
- –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ä–µ—á–∏ –¥–ª—è –ø—Ä–æ–∏–∑–Ω–æ—à–µ–Ω–∏—è
- –ì–µ–π–º–∏—Ñ–∏–∫–∞—Ü–∏—è —Å –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è–º–∏

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –¥–æ–ª–≥

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1 (–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π):**
- –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –¥—É–±–ª–∏—Ä—É—é—â–µ–≥–æ—Å—è –∫–æ–¥–∞ –º–µ–∂–¥—É —É—Ä–æ–∫–∞–º–∏
- –°–æ–∑–¥–∞–Ω–∏–µ –µ–¥–∏–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã —Ç–∏–ø–æ–≤ (TypeScript –∏–ª–∏ JSDoc)
- –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2 (–í—ã—Å–æ–∫–∏–π):**
- –ú–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ Web Components –¥–ª—è –ª—É—á—à–µ–π –∏–∑–æ–ª—è—Ü–∏–∏
- –í–Ω–µ–¥—Ä–µ–Ω–∏–µ CSS-in-JS –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö —Å—Ç–∏–ª–µ–π
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è bundle size (code splitting)

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3 (–°—Ä–µ–¥–Ω–∏–π):**
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- Storybook –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- E2E —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (Playwright/Cypress)

---

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–î–∞–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –±–∞–ª–∞–Ω—Å –º–µ–∂–¥—É –ø—Ä–æ—Å—Ç–æ—Ç–æ–π standalone HTML-—Ñ–∞–π–ª–æ–≤ –∏ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –ø–∞—Ç—Ç–µ—Ä–Ω–∞–º–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏. –ö–æ–¥ –Ω–∞–ø–∏—Å–∞–Ω —Å —É—á–µ—Ç–æ–º:

- **Maintainability**: –õ–µ–≥–∫–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –∏ —Ä–∞—Å—à–∏—Ä—è—Ç—å
- **Performance**: –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ –∏ —Ä–∞–±–æ—Ç—ã
- **Accessibility**: –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏
- **Scalability**: –ì–æ—Ç–æ–≤ –∫ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—é —á–µ—Ä–µ–∑ —Å–∏—Å—Ç–µ–º—É —à–∞–±–ª–æ–Ω–æ–≤
- **Developer Experience**: –ü–æ–Ω—è—Ç–µ–Ω –∏ —Ö–æ—Ä–æ—à–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω

–ü—Ä–∏ —Ä–∞–±–æ—Ç–µ –Ω–∞–¥ –Ω–æ–≤—ã–º–∏ —É—Ä–æ–∫–∞–º–∏ —Å–ª–µ–¥—É–π—Ç–µ —ç—Ç–∏–º –ø—Ä–∏–Ω—Ü–∏–ø–∞–º –∏ –ø–∞—Ç—Ç–µ—Ä–Ω–∞–º –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ –∫–æ–¥–æ–≤–æ–π –±–∞–∑—ã.

---

**–ê–≤—Ç–æ—Ä:** andreacebotarev-svg  
**–í–µ—Ä—Å–∏—è:** 1.0.0  
**–î–∞—Ç–∞:** –î–µ–∫–∞–±—Ä—å 2025
